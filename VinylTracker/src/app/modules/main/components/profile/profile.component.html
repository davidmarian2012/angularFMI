<app-header></app-header>

<div class="dashboard">
    <h1>Edit Profile</h1>
    <form [formGroup]="form">
    
        <div class="input-row">
            <label for="username">Username</label> <p>{{currentUser.username}}</p>
            
        </div>
        <div class="input-row">
            <label for="email">Email</label> <input formControlName="email">
            <div class="error-message">
                <div *ngIf="form.controls['email'].errors?.['required'] && form.controls['email'].dirty">
                    Email is required.
                </div>
                <div *ngIf="form.controls['email'].errors?.['pattern'] && form.controls['email'].dirty">
                    Invalid email address.
                </div>
            </div>
        </div>
        <div class="input-row">
            <label for="password">Password</label> <input type="password" formControlName="password">
            <div class="error-message">
                <div *ngIf="form.controls['password'].errors?.['minlength'] && (form.controls['password'].dirty || submitted)">
                    Password must be at least 3 characters long.
                </div>
                <div *ngIf="form.controls['password'].errors?.['maxlength'] && (form.controls['password'].dirty || submitted)">
                    Password must be max 30 characters long.
                </div>
            </div>
        </div>
        <div class="input-row">
            <label for="confirmpassword">Confirm Password</label> <input type="password" formControlName="confirmPassword">
            <div class="error-message">
                <div *ngIf="this.form.get('confirmPassword')?.value != this.form.get('password')?.value && (form.controls['confirmPassword'].dirty || submitted)">
                    Passwords do not match.
                </div>
            </div>
        </div>
        <div class="input-row">
            <button type="submit" (click)="changeProfile()">Save changes</button>
            <button type="button" class="create-btn" (click)="goBack()">Cancel</button>
        </div>
        
        <div class="text-p"><p *ngIf="saved" class="saved">Changes saved successfully</p></div>
    </form>
</div>